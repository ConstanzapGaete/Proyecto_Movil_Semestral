"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[551],{1889:(p,m,r)=>{r.d(m,{Wi:()=>f,__:()=>d});var d=function(o){return o.Documents="DOCUMENTS",o.Data="DATA",o.Library="LIBRARY",o.Cache="CACHE",o.External="EXTERNAL",o.ExternalStorage="EXTERNAL_STORAGE",o}(d||{}),f=function(o){return o.UTF8="utf8",o.ASCII="ascii",o.UTF16="utf16",o}(f||{})},551:(p,m,r)=>{r.r(m),r.d(m,{JustificaraPageModule:()=>O});var d=r(177),f=r(4341),a=r(4742),g=r(1923),o=r(467),v=r(7464),C=r(1889);const F=(0,v.F3)("Filesystem",{web:()=>r.e(2937).then(r.bind(r,2937)).then(t=>new t.FilesystemWeb)});var n=r(3953),P=r(3656),M=r(2260),y=r(7237);function x(t,c){1&t&&(n.j41(0,"ion-item")(1,"ion-label",17),n.EFF(2,"No tienes inasistencias"),n.k0s()())}function E(t,c){if(1&t&&(n.j41(0,"ion-item")(1,"ion-label")(2,"h2"),n.EFF(3),n.k0s(),n.j41(4,"p"),n.EFF(5),n.k0s()()()),2&t){const l=c.$implicit;n.R7$(3),n.JRh(l.fecha),n.R7$(2),n.JRh(l.asignatura)}}const j=[{path:"",component:(()=>{var t;class c{constructor(e,i,s,u,h){this.navCtrl=e,this.firebaseService=i,this.basededatosService=s,this.menuCtrl=u,this.alertController=h,this.mensaje="",this.ausencias=[],this.documentoSubido=!1}ngOnInit(){this.menuCtrl.enable(!0)}ngOnDestroy(){var e=this;this.menuCtrl.close(),this.authSubscription=this.firebaseService.getAuthState().subscribe(function(){var i=(0,o.A)(function*(s){null!=s&&s.email&&(e.ausencias=yield e.basededatosService.obtenerFechasAusentes(s.email))});return function(s){return i.apply(this,arguments)}}())}cerrarSesion(){var e=this;return(0,o.A)(function*(){try{yield e.menuCtrl.close(),e.firebaseService.signOut().subscribe({next:()=>{console.log("Sesi\xf3n cerrada exitosamente"),e.navCtrl.navigateRoot("/login",{animated:!0,animationDirection:"forward"})}})}catch(i){console.error("Error al cerrar el men\xfa:",i)}})()}subirDocumento(){var e=this;return(0,o.A)(function*(){try{const i=document.createElement("input");i.type="file",i.accept="image/*,.pdf",i.onchange=(0,o.A)(function*(){const s=i.files[0],u=new FileReader;u.onload=(0,o.A)(function*(){const h=u.result,k=s.type.includes("image")?"jpeg":"pdf",b=`documento_${Date.now()}.${k}`;yield F.writeFile({path:b,data:h.split(",")[1],directory:C.__.Documents}),console.log(`${b} guardado `),e.documentoSubido=!0}),u.readAsDataURL(s)}),i.click()}catch(i){console.error("Error al subir el documento:",i)}})()}enviar(){var e=this;return(0,o.A)(function*(){e.mensaje||e.documentoSubido?console.log("Formulario enviado "):yield(yield e.alertController.create({header:"Advertencia",message:"Debes enviar al menos un documento o escribir un mensaje.",buttons:["OK"]})).present()})()}abrirEnlace(e){var i=this;return(0,o.A)(function*(){yield i.menuCtrl.close(),window.open(e,"_blank")})()}ionViewWillEnter(){this.menuCtrl.enable(!0)}home(){var e=this;return(0,o.A)(function*(){yield e.menuCtrl.close(),e.navCtrl.navigateRoot("/homep",{})})()}}return(t=c).\u0275fac=function(e){return new(e||t)(n.rXU(P.q9),n.rXU(M.f),n.rXU(y.f),n.rXU(a._t),n.rXU(a.hG))},t.\u0275cmp=n.VBU({type:t,selectors:[["app-justificara"]],decls:32,vars:5,consts:[[3,"translucent"],["slot","start"],[1,"header-content"],["id","main-content",3,"fullscreen"],["collapse","condense"],["size","large"],[1,"centered-container"],["placeholder","Escribe aqu\xed tu justificaci\xf3n...",3,"ngModelChange","ngModel"],[4,"ngIf"],[4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center","padding","16px"],["color","primary","fill","outline","expand","block",2,"max-width","90%",3,"click"],["slot","start","name","document-text-outline"],["expand","block","color","primary",2,"width","90%",3,"click"],["vertical","bottom","horizontal","end","slot","fixed",2,"margin-bottom","16px","margin-right","16px"],[3,"click"],["name","home-outline"],["color","medium"]],template:function(e,i){1&e&&(n.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),n.nrm(3,"ion-menu-button"),n.k0s(),n.j41(4,"div",2)(5,"ion-title"),n.EFF(6,"Justifica tu inasistencia"),n.k0s()()()(),n.j41(7,"ion-content",3)(8,"ion-header",4)(9,"ion-toolbar")(10,"ion-title",5),n.EFF(11,"Justificar"),n.k0s()()(),n.j41(12,"div",6)(13,"ion-label"),n.EFF(14,"Escribe un mensaje"),n.k0s(),n.j41(15,"ion-textarea",7),n.mxI("ngModelChange",function(u){return n.DH7(i.mensaje,u)||(i.mensaje=u),u}),n.k0s()(),n.j41(16,"ion-list")(17,"ion-list-header")(18,"ion-label"),n.EFF(19,"Fechas de Ausencias"),n.k0s()(),n.DNE(20,x,3,0,"ion-item",8)(21,E,6,2,"ion-item",9),n.k0s(),n.j41(22,"div",10)(23,"ion-button",11),n.bIt("click",function(){return i.subirDocumento()}),n.nrm(24,"ion-icon",12),n.EFF(25," Subir Documento "),n.k0s()(),n.j41(26,"div",10)(27,"ion-button",13),n.bIt("click",function(){return i.enviar()}),n.EFF(28," Enviar "),n.k0s()(),n.j41(29,"ion-fab",14)(30,"ion-fab-button",15),n.bIt("click",function(){return i.home()}),n.nrm(31,"ion-icon",16),n.k0s()()()),2&e&&(n.Y8G("translucent",!0),n.R7$(7),n.Y8G("fullscreen",!0),n.R7$(8),n.R50("ngModel",i.mensaje),n.R7$(5),n.Y8G("ngIf",0===i.ausencias.length),n.R7$(),n.Y8G("ngForOf",i.ausencias))},dependencies:[d.Sq,d.bT,f.BC,f.vS,a.Jm,a.QW,a.W9,a.Q8,a.YW,a.eU,a.iq,a.uz,a.he,a.nf,a.AF,a.MC,a.nc,a.BC,a.ai,a.Gw],styles:["ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #014ba0;--color: #def7ff}ion-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px 16px}ion-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{color:#def7ff;font-weight:700;font-size:20px}.centered-container[_ngcontent-%COMP%]{margin-top:20vh;padding:0 16px;text-align:center}.centered-container[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:block;font-size:16px;margin-bottom:8px}.centered-container[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{width:100%;--background: #f9f9f9;border-radius:8px;margin-top:8px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:16px}.button-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:1;margin:0 5px;max-width:120px}ion-button[expand=block][_ngcontent-%COMP%]{width:90%;margin:0 auto}ion-fab-button[_ngcontent-%COMP%]{--background: #3880ff}ion-content[_ngcontent-%COMP%]{--background: #ffffff}"]}),c})()}];let J=(()=>{var t;class c{}return(t=c).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.$C({type:t}),t.\u0275inj=n.G2t({imports:[g.iI.forChild(j),g.iI]}),c})(),O=(()=>{var t;class c{}return(t=c).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.$C({type:t}),t.\u0275inj=n.G2t({imports:[d.MD,f.YN,a.bv,J]}),c})()}}]);